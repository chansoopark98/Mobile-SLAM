%YAML:1.0

dataset_path: ./assets/datasets/tum/dataset-room1_512_16

#processing parameters
frame_skip: 0                   # process all frames
start_frame: 0
end_frame: -1

#camera calibration (TUM-VI cam0 - equidistant/fisheye model)
# EquidistantCamera (Kannala-Brandt) parameter format:
#   distortion: k2, k3, k4, k5  (k1=1 implicit; TUM-VI k1->k2, k2->k3, k3->k4, k4->k5)
#   projection: mu=fx, mv=fy, u0=cx, v0=cy
model_type: KANNALA_BRANDT
camera_name: camera
image_width: 512
image_height: 512
projection_parameters:
   k2: 0.0034823894022493434
   k3: 0.0007150348452162257
   k4: -0.0020532361418706202
   k5: 0.00020293673591811182
   mu: 1.909784771512872e+02
   mv: 1.909733070521226e+02
   u0: 2.549317060593548e+02
   v0: 2.568974428996504e+02

# Rotation from camera frame to imu frame, imu^R_cam
# R_imu_cam = R_cam_imu^T  (T_cam_imu from camchain.yaml, transposed)
extrinsicRotation: !!opencv-matrix
   rows: 3
   cols: 3
   dt: d
   data: [-0.9995250378696743, 0.0075019185074052044, -0.02989013031643309,
           0.029615343885863205, -0.03439736061393144, -0.998969345370175,
           -0.008522328211654736, -0.9993800792498829, 0.03415885127385616]

# Translation from camera frame to imu frame, imu^T_cam
# t_imu_cam = -R_cam_imu^T * t_cam_imu
extrinsicTranslation: !!opencv-matrix
   rows: 3
   cols: 1
   dt: d
   data: [0.04517590, 0.07251590, -0.04395990]

#feature tracker parameters
max_cnt: 150            # max feature number in feature tracking
min_dist: 20            # min distance between two features
F_threshold: 1.0        # ransac threshold (pixel)
show_track: 1           # publish tracking image as topic
equalize: 1             # equalize image brightness
fisheye: 0              # not using circular fisheye mask

#optimization parameters
max_solver_time: 0.1    # max solver iteration time (s)
max_num_iterations: 10  # max solver iterations
keyframe_parallax: 10.0 # keyframe selection threshold (pixel)

#imu parameters (from TUM-VI imu_config.yaml - inflated values)
acc_n: 0.0028           # accelerometer measurement noise standard deviation
gyr_n: 0.00016          # gyroscope measurement noise standard deviation
acc_w: 0.00086          # accelerometer bias random walk noise standard deviation
gyr_w: 0.000022         # gyroscope bias random walk noise standard deviation
g_norm: 9.81007         # gravity magnitude
